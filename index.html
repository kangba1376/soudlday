<!DOCTYPE html>
<html lang="bo">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Soul Day</title>

    <link rel="icon" type="image/png" sizes="32x32" href="favicon-small.png">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8B1A10">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Soul Day">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { 
            --main-red: #8B1A10; 
            --gold: #E5C366; 
            --bg: #FDFBF7; 
        }
        
        * {
            -webkit-user-select: none !important;
            user-select: none !important;
            -webkit-touch-callout: none !important;
            box-sizing: border-box;
        }

        @font-face {
            font-family: 'TibetanCustom';
            src: url('TibetWildYak.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        .font-tibetan { 
            font-family: 'TibetanCustom', 'Tibetan', 'Kailasa', 'Microsoft Himalaya', serif; 
            line-height: 1.2; 
        }
        
        body, html { 
            background-color: #8B1A10; 
            margin: 0; padding: 0;
            height: 100%; width: 100%;
            overflow: hidden; 
        }

        .page-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100dvh;
            background-color: var(--bg);
            overflow: hidden;
            position: relative;
            border: 4px solid var(--main-red);
            outline: 2px solid var(--gold);
            outline-offset: -6px;
            border-radius: 1rem;
        }

        .safe-top-padding {
            padding-top: env(safe-area-inset-top, 20px);
        }

        .app-card { 
            background: white; 
            border-radius: 1.2rem; 
            box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.05); 
            border: 1px solid rgba(0,0,0,0.03); 
            width: 100%;
        }

        .red-gradient { 
            background: linear-gradient(135deg, #8B1A10 0%, #5E110A 100%); 
            position: relative;
        }

        @keyframes pure-breath {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }
        .animate-breath { animation: pure-breath 2.5s infinite ease-in-out; }

        @keyframes dynamic-scale {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }
        .animate-dynamic { animation: dynamic-scale 2s infinite ease-in-out; display: inline-block; }

        @keyframes finger-poke {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.1); }
        }
        @keyframes back-arrow-bounce {
            0%, 100% { transform: translateX(0); opacity: 1; }
            50% { transform: translateX(-8px); opacity: 0.7; }
        }

        .click-guide-ring {
            position: relative;
            width: 24px;
            height: 24px;
            background: #8B1A10;
            border-radius: 50%;
            margin-right: 12px;
        }
        .click-guide-ring::after {
            content: "";
            position: absolute;
            inset: 0;
            border: 2px solid #8B1A10;
            border-radius: 50%;
            animation: ring-pulse 1.5s infinite ease-out;
        }
        @keyframes ring-pulse {
            0% { transform: scale(0.5); opacity: 1; }
            100% { transform: scale(1.8); opacity: 0; }
        }

        .back-btn-vertical {
            position: absolute;
            top: env(safe-area-inset-top, 0px);
            right: 0;
            bottom: 0;
            width: clamp(50px, 10vw, 80px); 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gold);
            cursor: pointer;
            z-index: 250;
        }

        .back-arrow-icon { animation: back-arrow-bounce 0.8s infinite ease-in-out; }
        .poke-finger {
            font-size: clamp(1.5rem, 4vh, 3rem);
            margin-top: 2px;
            animation: finger-poke 0.8s infinite ease-in-out;
        }

        .zodiac-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); 
            grid-template-rows: repeat(3, 1fr);
            gap: 1.5vmin; 
            flex: 1; 
            width: 100%;
            min-height: 0; 
        }

        .zodiac-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            overflow: hidden;
        }

        .zodiac-icon-box {
            width: 100%; 
            height: 70%; 
            background: white; 
            border-radius: 1.5vmin; 
            position: relative;
            border: 1px solid #8B1A10;
            border-top-width: 3px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.04);
        }
        
        .zodiac-icon-box img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 75%; 
            height: 75%;
            object-fit: contain;
        }

        .zodiac-item span { 
            font-size: 2.4vmin; 
            margin-top: 1.2vh; 
            white-space: nowrap; 
            font-weight: bold;
            color: #475569;
        }

        .full-overlay { 
            display: none; 
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 100;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            flex-direction: column;
            height: 100dvh;
            border: 4px solid var(--main-red);
            outline: 2px solid var(--gold);
            outline-offset: -6px;
            border-radius: 1rem;
        }
        
        .full-overlay.show { display: flex; opacity: 1; transform: translateX(0); }

        .results-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 1.5vh 4%;
            padding-bottom: calc(1vh + env(safe-area-inset-bottom, 15px));
            gap: 1.2vh;
            justify-content: space-between; 
            min-height: 0;
        }

        .result-card {
            flex: 1; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 1vh !important;
            min-height: 0;
            border: 1px solid #8B1A10 !important;
            border-top-width: 3px !important;
        }

        .year-chip {
            background: white;
            border-radius: 1.2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.04);
            border: 1px solid #8B1A10;
            border-top-width: 3px;
            padding: 0.5vh;
        }

        .next-btn {
            background: #E5C366; color: #8B1A10;
            width: 100%; max-width: 500px;
            align-self: center; padding: 1.5vh 20px;
            border-radius: 12px; font-weight: bold;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
        }

        .hint-box {
            background: #8B1A10; color: #E5C366;
            border-radius: 8px; text-align: center;
            display: flex; align-items: center; justify-content: center;
            padding: 1vh; width: 100%;
            min-height: 3.5rem; flex-shrink: 1;
        }

        .disclaimer-box {
            width: 100%;
            text-align: center;
            padding: 0; 
            background: transparent; 
            border: none; 
            flex-shrink: 0;
            margin-top: auto; 
            margin-bottom: 0; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 0;
            overflow: hidden;
        }

        .disclaimer-line { 
            font-size: clamp(8px, 1.2vh, 11px); 
            font-weight: 600; 
            color: #8B1A10; 
            line-height: 1.3;
            white-space: nowrap; 
            opacity: 0.8;
        }
        .copyright-line { 
            font-size: clamp(9px, 1.4vh, 13px); 
            font-weight: bold;
            color: #4A90E2; 
            margin-top: 2px;
            white-space: nowrap; 
        }

        @media (orientation: landscape) {
            header, .red-gradient.shrink-0 { height: 10vh !important; min-height: 50px !important; }
            .zodiac-grid { gap: 0.8vmin; }
            .zodiac-icon-box { height: 65%; }
            .results-container { padding-bottom: 5px !important; }
            .disclaimer-box { margin-bottom: 0; }
            .disclaimer-line { font-size: 1.2vh; }
        }
    </style>
</head>
<body>
    <canvas id="starfield" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50;"></canvas>

    <div class="page-container" id="main-page">
        <header class="w-full relative flex items-center justify-center px-[4%] shrink-0 red-gradient rounded-b-[1rem] shadow-md h-[15vh] safe-top-padding">
            <div class="flex flex-col justify-center items-center">
                <p class="font-tibetan text-[#E5C366] font-black text-[clamp(1.2rem,4.5vmin,2.2rem)]">‡Ωñ‡Ωº‡Ωë‡ºã‡ΩÄ‡æ±‡Ω≤‡ºã‡Ω¶‡æê‡Ω¢‡ºã‡Ω¢‡æ©‡Ω≤‡Ω¶‡ºã‡Ω¢‡Ω≤‡ΩÇ‡ºã‡Ωî‡Ω†‡Ω≤‡ºã‡Ω§‡Ω∫‡Ω¶‡ºã‡Ωñ‡æ±‡ºç</p>
                <p class="text-white/90 font-bold text-[clamp(0.8rem,2.8vmin,1.3rem)]">Ë•øËóèÂ§©ÊñáÂéÜÁÆóÁü•ËØÜ</p>
            </div>
            <img src="logo.png" class="absolute right-[4%] w-[60px] h-[40px] object-contain rounded-lg">
        </header>

        <main class="flex-1 flex flex-col px-[4%] pt-[1vh] pb-[0.5vh] overflow-hidden">
            <section class="app-card border-t-4 border-[#8B1A10] p-[1vh] shrink-0 flex flex-col justify-center h-[10vh] mb-[1vh]">
                <div class="flex justify-between items-center border-b border-slate-50"> 
                    <span class="font-bold text-slate-500 font-tibetan text-[1.8vmin]">‡Ωë‡Ω∫‡ºã‡Ω¢‡Ω≤‡ΩÑ‡ºã‡ºç ‰ªäÊó•</span>
                    <div id="full-date" class="font-black font-mono text-[#8B1A10] text-[2.2vh]">0000.00.00</div>
                </div>
                <div class="flex justify-between items-center"> 
                    <p id="tb-day" class="text-[#8B1A10] font-bold font-tibetan text-[2.8vh]">...</p>
                    <p id="cn-day" class="text-sky-400 font-black text-[2.8vh]">...</p>
                </div>
            </section>

            <section class="app-card flex-1 p-[1.5vh] text-center border-t-4 border-[#8B1A10] flex flex-col min-h-0">
                <div class="mb-[1vh] shrink-0">
                    <p class="font-bold text-slate-800 font-tibetan text-[2.5vmin]">‡Ω¢‡ΩÑ‡ºã‡ΩÇ‡Ω≤‡ºã‡Ω£‡Ωº‡ºã‡Ω¢‡æü‡ΩÇ‡Ω¶‡ºã‡Ω£‡ºã‡Ωò‡Ωì‡Ωì‡ºã‡Ωì‡ºã‡Ωñ‡æ≥‡ºã‡ΩÇ‡Ωü‡Ω†‡ºã‡Ω¶‡Ωº‡ΩÇ‡Ω¶‡ºã‡ΩÇ‡Ωü‡Ω≤‡ΩÇ‡Ω¶‡ºã‡Ωê‡Ω¥‡Ωñ‡ºç</p>
                    <p class="font-black text-[#8B1A10] uppercase text-[1.8vmin]">ËØ∑ÁÇπÂáªÊÇ®ÁöÑÂ±ûÁõ∏Êü•ÁúãÁõ∏ÂÖ≥ÊòüËÄÄ</p>
                </div>
                <div class="zodiac-grid" id="zodiac-btns"></div>
                <div class="disclaimer-box">
                    <p class="disclaimer-line">ËóèÊóè‰º†ÁªüÊñáÂåñÂ≠¶‰π†Â∑•ÂÖ∑ÔºöÂÜÖÂÆπÂü∫‰∫éËóèÂéÜÊñáÁåÆÊï¥ÁêÜÔºå‰ªÖ‰æõÂèÇËÄÉ„ÄÇ</p>
                    <p class="disclaimer-line">Ê≠§Â∑•ÂÖ∑‰∏ç‰Ωú‰∏∫‰ªª‰ΩïÂÜ≥Á≠ñ‰æùÊçÆÔºåËØ∑ÁêÜÊÄß‰ΩøÁî®ÔºåÁõ∏‰ø°ÁßëÂ≠¶„ÄÇ</p>
                    <p class="copyright-line">¬© ‡º¢‡º†‡º¢‡º¶ ‡ΩÅ‡Ωò‡Ω¶‡ºã‡Ωî‡ºã‡Ωö‡ΩÑ‡ºã‡ºç KHAM PA TSANG ‡º°‡ºß‡ºß‡º°‡º°‡º©‡º•‡º•‡º•‡º•‡º§</p>
                </div>
            </section>
        </main>
    </div>

    <div id="astro-page" class="full-overlay">
        <div class="red-gradient h-[15vh] flex items-center justify-center shrink-0 safe-top-padding">
            <div class="back-btn-vertical" onclick="backToHome()">
                <div class="back-arrow-icon">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 19L8 12L15 5" stroke="#E5C366" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span class="poke-finger">üëÜ</span>
            </div>
            <div class="flex items-center gap-4 pr-10 animate-breath"> 
                <div id="astro-banner-img" class="h-[10vh] w-[10vh] flex items-center justify-center"></div> 
                <h3 id="astro-banner-name-tb" class="font-bold font-tibetan text-[#E5C366] text-[4vh]"></h3>
            </div>
        </div>
        <div class="results-container">
            <div id="results" class="flex flex-col gap-[1.2vh] flex-1 min-h-0"></div>
            <button class="next-btn" onclick="showBirthPage()">
                <div class="click-guide-ring"></div>
                <div class="flex flex-col items-center">
                    <span class="font-tibetan text-[2.4vh]">‡Ω¶‡Ωº‡ºã‡Ω¶‡Ωº‡Ω†‡Ω≤‡ºã‡Ω†‡ΩÅ‡æ≤‡Ω¥‡ΩÑ‡Ω¶‡ºã‡Ω£‡Ωº‡ºã‡Ω£‡ºã‡ΩÇ‡Ωü‡Ω≤‡ΩÇ‡Ω¶‡ºç</span>
                    <span class="text-[1.6vh] opacity-80 uppercase">Êü•ÁúãÊÇ®ÁöÑÂá∫ÁîüÂπ¥‰ªΩ</span>
                </div>
            </button>
        </div>
    </div>

    <div id="birth-year-page" class="full-overlay">
        <div class="red-gradient h-[16vh] flex flex-col items-center justify-center shrink-0 safe-top-padding relative">
            <div class="back-btn-vertical" onclick="backToHome()">
                <div class="back-arrow-icon">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 19L8 12L15 5" stroke="#E5C366" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span class="poke-finger">üëÜ</span>
            </div>
            <div class="flex items-center justify-center gap-3 animate-breath">
                <div id="birth-banner-img" class="h-[10vh] w-[10vh] flex items-center justify-center"></div> 
                <h4 id="birth-banner-name-tb" class="font-bold font-tibetan text-[#E5C366] text-[4vh]"></h4>
            </div>
        </div>
        <div class="w-full py-2 shrink-0">
            <p class="text-[#8B1A10] text-[1.8vh] font-bold font-tibetan text-center">‡Ω†‡ΩÅ‡æ≤‡Ω¥‡ΩÑ‡Ω¶‡ºã‡Ω£‡Ωº‡ºç Âá∫ÁîüÂπ¥‰ªΩ</p>
        </div>
        <div id="birth-years-grid" class="grid grid-cols-4 grid-rows-3 gap-[1.8vmin] flex-1 p-[4%] pt-2 pb-[calc(4% + env(safe-area-inset-bottom, 10px))]"></div>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js');
        }

        const WEEKDAYS_TB = ["‡ΩÇ‡Ωü‡Ω†‡ºã‡Ωâ‡Ω≤‡ºã‡Ωò‡ºç", "‡ΩÇ‡Ωü‡Ω†‡ºã‡Ωü‡æ≥‡ºã‡Ωñ‡ºç", "‡ΩÇ‡Ωü‡Ω†‡ºã‡Ωò‡Ω≤‡ΩÇ‡ºã‡Ωë‡Ωò‡Ω¢‡ºç", "‡ΩÇ‡Ωü‡Ω†‡ºã‡Ω£‡æ∑‡ΩÇ‡ºã‡Ωî‡ºç", "‡ΩÇ‡Ωü‡Ω†‡ºã‡Ωï‡Ω¥‡Ω¢‡ºã‡Ωñ‡Ω¥‡ºç", "‡ΩÇ‡Ωü‡Ω†‡ºã‡Ωî‡ºã‡Ω¶‡ΩÑ‡Ω¶‡ºç", "‡ΩÇ‡Ωü‡Ω†‡ºã‡Ω¶‡æ§‡Ω∫‡Ωì‡ºã‡Ωî‡ºç"];
        const WEEKDAYS_CN = ["ÊòüÊúüÊó•", "ÊòüÊúü‰∏Ä", "ÊòüÊúü‰∫å", "ÊòüÊúü‰∏â", "ÊòüÊúüÂõõ", "ÊòüÊúü‰∫î", "ÊòüÊúüÂÖ≠"];
        const ZODIAC_CN = ["Èº†", "Áâõ", "Ëôé", "ÂÖî", "Èæô", "Ëõá", "È©¨", "Áæä", "Áå¥", "È∏°", "Áãó", "Áå™"];
        const ZODIAC_TB = ["‡Ωñ‡æ±‡Ω≤‡ºã‡Ωñ‡ºç", "‡ΩÇ‡æ≥‡ΩÑ‡ºã‡ºç", "‡Ω¶‡æü‡ΩÇ", "‡Ω°‡Ωº‡Ω¶‡ºç", "‡Ω†‡Ωñ‡æ≤‡Ω¥‡ΩÇ", "‡Ω¶‡æ¶‡æ≤‡Ω¥‡Ω£‡ºç", "‡Ω¢‡æü‡ºç", "‡Ω£‡Ω¥‡ΩÇ", "‡Ω¶‡æ§‡æ≤‡Ω∫‡Ω£‡ºç", "‡Ωñ‡æ±‡ºç", "‡ΩÅ‡æ±‡Ω≤‡ºç", "‡Ωï‡ΩÇ"];
        const ELEMENTS_TB = ["‡Ω£‡æï‡ΩÇ‡Ω¶‡ºç", "‡Ω£‡æï‡ΩÇ‡Ω¶‡ºç", "‡ΩÜ‡Ω¥‡ºç", "‡ΩÜ‡Ω¥‡ºç", "‡Ω§‡Ω≤‡ΩÑ‡ºã‡ºç", "‡Ω§‡Ω≤‡ΩÑ‡ºã‡ºç", "‡Ωò‡Ω∫‡ºç", "‡Ωò‡Ω∫‡ºç", "‡Ω¶‡ºç", "‡Ω¶‡ºç"];
        const ASTRO_MAP = { "Èº†": [2, 3, 6], "Áå™": [2, 3, 6], "Ëôé": [6, 4, 5], "ÂÖî": [6, 4, 5], "Ëõá": [5, 2, 3], "È©¨": [5, 2, 3], "Áå¥": [4, 5, 2], "È∏°": [4, 5, 2], "Áâõ": [3, 6, 4], "Áãó": [3, 1, 4], "Áæä": [1, 5, 4], "Èæô": [3, 0, 4] };
        const APPLE_ICONS = { "ÁîüËÄÄ": "‚ù§Ô∏è", "Âú£ËÄÄ": "üåü", "ÂÖãËÄÄ": "‚ö†Ô∏è" };
        let currentIdx = 0;

        function initStars() {
            const canvas = document.getElementById('starfield');
            const ctx = canvas.getContext('2d');
            let stars = [];
            function resize() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            window.addEventListener('resize', resize);
            resize();
            for (let i = 0; i < 80; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 1.5,
                    opacity: Math.random(),
                    speed: 0.01 + Math.random() * 0.02
                });
            }
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                stars.forEach(star => {
                    ctx.fillStyle = `rgba(229, 195, 102, ${star.opacity})`;
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                    ctx.fill();
                    star.opacity += star.speed;
                    if (star.opacity > 1 || star.opacity < 0) star.speed = -star.speed;
                });
                requestAnimationFrame(draw);
            }
            draw();
        }

        function initZodiacBtns() {
            const grid = document.getElementById('zodiac-btns');
            grid.innerHTML = ZODIAC_CN.map((animal, i) => `
                <div class="zodiac-item cursor-pointer" onclick="showAstroPage('${animal}', ${i})">
                    <div class="zodiac-icon-box">
                        <img src="${i + 1}.png" alt="${animal}">
                    </div>
                    <span class="font-tibetan">${ZODIAC_TB[i]}</span>
                </div>
            `).join('');
        }

        function showAstroPage(animal, idx) {
            currentIdx = idx;
            const content = document.getElementById('astro-page');
            document.getElementById('astro-banner-img').innerHTML = `<img src="${idx + 1}.png" class="h-full w-auto object-contain">`;
            document.getElementById('astro-banner-name-tb').innerText = ZODIAC_TB[idx];
            const vals = ASTRO_MAP[animal];
            const todayIdx = new Date().getDay();
            document.getElementById('results').innerHTML = [
                { type: 'ÁîüËÄÄ', tb: '‡Ω¶‡æ≤‡Ωº‡ΩÇ‡ºã‡ΩÇ‡Ωü‡Ω†‡ºç', val: vals[0], hint: '‡Ωë‡Ω∫‡ºã‡Ω¢‡Ω≤‡ΩÑ‡ºã‡Ω¶‡æ≤‡Ωº‡ΩÇ‡ºã‡ΩÇ‡Ωü‡Ω†‡ºã‡Ω†‡ΩÅ‡Ω∫‡Ω£‡ºã‡Ωñ‡Ω¶‡ºã‡Ω¢‡æ£‡Ωò‡ºã‡Ωë‡ΩÄ‡Ω¢‡ºã‡Ωë‡ΩÇ‡Ω∫‡ºã‡Ω£‡Ω¶‡ºã‡Ω£‡ºã‡Ωñ‡Ωü‡ΩÑ‡ºã‡ΩÇ‡Ω¶‡Ω¥‡ΩÑ‡Ω¶‡ºç' },
                { type: 'Âú£ËÄÄ', tb: '‡Ωñ‡æ≥‡ºã‡ΩÇ‡Ωü‡Ω†‡ºç', val: vals[1], hint: '‡Ωë‡Ω∫‡ºã‡Ω¢‡Ω≤‡ΩÑ‡ºã‡Ωñ‡æ≥‡ºã‡ΩÇ‡Ωü‡Ω†‡ºã‡Ω†‡ΩÅ‡Ω∫‡Ω£‡ºã‡Ωñ‡Ω¶‡ºã‡Ωñ‡æ±‡ºã‡Ω£‡Ω¶‡ºã‡ΩÇ‡ΩÑ‡ºã‡Ω°‡ΩÑ‡ºã‡Ω†‡ΩÇ‡æ≤‡Ω¥‡Ωñ‡ºã‡Ωî‡Ω¢‡ºã‡ΩÇ‡Ω¶‡Ω¥‡ΩÑ‡Ω¶‡ºç' },
                { type: 'ÂÖãËÄÄ', tb: '‡ΩÇ‡Ω§‡Ω∫‡Ωë‡ºã‡ΩÇ‡Ωü‡Ω†‡ºç', val: vals[2], hint: '‡Ωë‡Ω∫‡ºã‡Ω¢‡Ω≤‡ΩÑ‡ºã‡ΩÇ‡Ω§‡Ω∫‡Ωë‡ºã‡ΩÇ‡Ωü‡Ω†‡ºã‡Ω†‡ΩÅ‡Ω∫‡Ω£‡ºã‡Ωñ‡Ω¶‡ºã‡Ω£‡Ω¶‡ºã‡Ωë‡Ωº‡Ωì‡ºã‡Ωñ‡Ω§‡Ωº‡Ω£‡ºã‡Ωì‡ºã‡Ω£‡Ω∫‡ΩÇ‡Ω¶‡ºã‡ΩÇ‡Ω¶‡Ω¥‡ΩÑ‡Ω¶‡ºç' }
            ].map(item => {
                const isActive = todayIdx === item.val;
                return `
                    <div class="app-card result-card ${isActive ? 'bg-amber-50' : ''}">
                        <div class="flex justify-around items-center">
                            <div class="text-center">
                                <h4 class="font-tibetan font-bold ${isActive ? 'text-[#8B1A10] text-[2.8vh]' : 'text-slate-400 text-[2.2vh]'}">${item.tb}</h4>
                                <p class="text-[1.3vh] font-black uppercase">${item.type}</p>
                            </div>
                            <div class="text-[5.5vh] ${isActive ? 'animate-dynamic' : 'opacity-10'}">${APPLE_ICONS[item.type]}</div>
                            <div class="text-center">
                                <span class="font-tibetan font-bold ${isActive ? 'text-[#8B1A10] text-[2.8vh]' : 'text-slate-400 text-[2.2vh]'}">${WEEKDAYS_TB[item.val].replace('‡ΩÇ‡Ωü‡Ω†‡ºã', '')}</span>
                                <p class="text-[1.3vh] font-black text-sky-400 uppercase">${WEEKDAYS_CN[item.val].replace('ÊòüÊúü', 'Âë®')}</p>
                            </div>
                        </div>
                        ${isActive ? `<div class="hint-box mt-2"><span class="font-tibetan font-bold text-[1.8vh]">${item.hint}</span></div>` : ''}
                    </div>`;
            }).join('');
            content.style.display = 'flex';
            setTimeout(() => content.classList.add('show'), 10);
        }

        function backToHome() {
            document.querySelectorAll('.full-overlay').forEach(p => {
                p.classList.remove('show');
                setTimeout(() => p.style.display = 'none', 400);
            });
        }

        function showBirthPage() {
            const page = document.getElementById('birth-year-page');
            document.getElementById('birth-banner-img').innerHTML = `<img src="${currentIdx + 1}.png" class="h-full w-auto object-contain">`;
            document.getElementById('birth-banner-name-tb').innerText = ZODIAC_TB[currentIdx];
            const now = new Date();
            const currentYear = now.getFullYear();
            const baseYear = (now < (new Date(2026, 1, 17))) ? currentYear - 1 : currentYear;
            let yearsHtml = "";
            let count = 0;
            for (let y = baseYear; count < 12; y--) { 
                const zIdx = (y - 4) % 12;
                if ((zIdx < 0 ? zIdx + 12 : zIdx) === currentIdx) {
                    yearsHtml += `
                        <div class="year-chip">
                            <span class="text-[#8B1A10] font-black text-[2.2vh] my-0.5">${y}</span>
                            <span class="font-tibetan text-sky-500 font-bold text-[1.8vh] my-0.5">‡Ω£‡Ωº‡ºç ${baseYear - y + 1}</span>
                            <span class="font-tibetan text-[#8B1A10] text-[1.5vh] my-0.5">${ELEMENTS_TB[y % 10]}</span>
                        </div>`;
                    count++;
                }
            }
            document.getElementById('birth-years-grid').innerHTML = yearsHtml;
            page.style.display = 'flex';
            setTimeout(() => page.classList.add('show'), 10);
        }

        window.onload = () => {
            const now = new Date();
            document.getElementById('full-date').innerText = `${now.getFullYear()}.${String(now.getMonth() + 1).padStart(2, '0')}.${String(now.getDate()).padStart(2, '0')}`;
            document.getElementById('tb-day').innerText = WEEKDAYS_TB[now.getDay()];
            document.getElementById('cn-day').innerText = WEEKDAYS_CN[now.getDay()];
            initZodiacBtns();
            initStars();
        };
    </script>
</body>
</html>